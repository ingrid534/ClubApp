generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id             String          @id @default(uuid())
  firstName      String
  lastName       String
  email          String          @unique
  phoneNumber    String?         @unique
  username       String          @unique
  passwordHash   String
  followingClubs ClubFollowing[]
  organizedClubs Club[]
}

model Club {
  id          String           @id @default(uuid())
  name        String           @unique
  followers   ClubFollowing[]
  organizer   User             @relation(fields: [organizerId], references: [id])
  organizerId String
  events      Event[]
  categories  ClubCategories[]
  registered  Boolean          @default(false)
}

model Event {
  id       String   @id @default(uuid())
  name     String
  location String
  time     DateTime
  clubId   String
  club     Club     @relation(fields: [clubId], references: [id])
}

model Category {
  id          String           @id @default(uuid())
  name        String           @unique
  description String
  clubs       ClubCategories[]
}

model ClubFollowing {
  userId String
  clubId String
  user   User   @relation(fields: [userId], references: [id])
  club   Club   @relation(fields: [clubId], references: [id])

  @@id([userId, clubId])
}

model ClubCategories {
  clubId     String
  categoryId String
  club       Club     @relation(fields: [clubId], references: [id])
  category   Category @relation(fields: [categoryId], references: [id])

  @@id([clubId, categoryId])
}
